package com.jeppesensystems.customization.edifact;

import static org.junit.Assert.*;

import java.io.ByteArrayInputStream;
import java.nio.charset.Charset;

import org.junit.Test;

public class EdifactParserTests {

	@Test
	public void testParse() {
		String sampleData = "UNA:+.? '\nUNB+IATB:1+6XPPC+LHPPC+940101:0950+1'\nUNH+1+PAORES:93:1:IA'\nMSG+1:45'\nIFT+3+XYZCOMPANY AVAILABILITY'\nERC+A7V:1:AMD'\nIFT+3+NO MORE FLIGHTS'\nODI'\nTVL+240493:1000::1220+FRA+JFK+DL+400+C'\nPDI++C:3+Y::3+F::1'\nAPD+74C:0:::6++++++6X'\nTVL+240493:1740::2030+JFK+MIA+DL+081+C'\nPDI++C:4'\nAPD+EM2:0:1630::6+++++++DA'\nUNT+13+1'\nUNZ+1+1'\n";
		try {
			new EdifactParser().parse(new ByteArrayInputStream(sampleData.getBytes(Charset.forName("latin1"))));
		} catch (Exception ex) {
			ex.printStackTrace();
			fail(ex.getMessage());
		}
	}
	
	@Test
	public void testParseLong() {
		String sampleData = "UNA:+.? 'UNB+UNOA:4+SCANDINAVIAN AIRLINES:ZZ+CNADAPIS:ZZ+110503:0140+SK080142++APIS'UNG+PAXLST+SCANDINAVIAN AIRLINES+CNADAPIS+110503:0140+SK08014210+UN+D:05B'UNH+SK08014211+PAXLST:D:05B:UN:IATA+SK995 02 CPH09+01'BGM+250'RFF+TN:SK995 02 CPH:::9'NAD+MS+++MALMQVIST:HANS'COM+?+(46) 8 797 2974:TE+?+(46) 8 797 4050:FX'TDT+20+SK995'LOC+125+CPH'DTM+189:1105022100:201'LOC+87+PEK'DTM+232:1105031155:201'NAD+FM+++LANGSET:ERIK CHRISTIAN+SIGURD HJORTSVEI 1+ROEYSE++3530+NOR'ATT+2++M'DTM+329:510928'LOC+178+CPH'LOC+179+PEK'LOC+180+NOR+:::BAERUM'NAT+2+NOR'DOC+P:110:ZZZ+27530127'DTM+36:191117'LOC+91+NOR'DOC+L:110:ZZZ+280951 39185'DTM+36:151001'LOC+91+NOR'NAD+FM+++BUE:JOERGEN MARENTZIUS+HOFSTADEIKENE9+ASKER++1384+NOR'ATT+2++M'DTM+329:580916'LOC+178+CPH'LOC+179+PEK'LOC+180+NOR+:::RISSA'NAT+2+NOR'DOC+P:110:ZZZ+20607252'DTM+36:141028'LOC+91+NOR'DOC+L:110:ZZZ+N-160958 46916'DTM+36:160201'LOC+91+NOR'NAD+FM+++INGERS:LARS URBAN+OSKARSVAEGEN 32+SUNDBYBERG++172 76+SWE'ATT+2++M'DTM+329:630521'LOC+178+CPH'LOC+179+PEK'LOC+180+SWE+:::LULEAA DOMK'NAT+2+SWE'DOC+P:110:ZZZ+81785954'DTM+36:160108'LOC+91+SWE'DOC+L:110:ZZZ+630521 9070'DTM+36:121107'LOC+91+SWE'NAD+FM+++BENGTSSON:BENGT ERLING INGEMAR+GATEKAERRSVAEGEN 4+OXIE++238 43+SWE'ATT+2++M'DTM+329:550823'LOC+178+CPH'LOC+179+PEK'LOC+180+SWE+:::TOMMARP'NAT+2+SWE'DOC+P:110:ZZZ+81448998'DTM+36:150828'LOC+91+SWE'NAD+FM+++ROELBY:MARTIN JENS+DRAGONVAEGEN 44+STAFFANSTORP++245 91+SWE'ATT+2++M'DTM+329:740317'LOC+178+CPH'LOC+179+PEK'LOC+180+DNK+:::HELSINGOER'NAT+2+DNK'DOC+P:110:ZZZ+200856642'DTM+36:160110'LOC+91+DNK'NAD+FM+++MARDELL:SUSANNE ANNI+FAAGELBACKSGATAN 16+MALMOE++217 44+SWE'ATT+2++F'DTM+329:730813'LOC+178+CPH'LOC+179+PEK'LOC+180+SWE+:::M LUND'NAT+2+SWE'DOC+P:110:ZZZ+34651407'DTM+36:131203'LOC+91+SWE'NAD+FM+++FRISK:KJELL MAGNUS+EVEROED GAMLEGAARD+TOMELILLA++273 93+SWE'ATT+2++M'DTM+329:710201'LOC+178+CPH'LOC+179+PEK'LOC+180+SWE+:::U VAESTERAAS'NAT+2+SWE'DOC+P:110:ZZZ+62864032'DTM+36:130905'LOC+91+SWE'NAD+FM+++SKOVHUS:HELENE+ASMILDHOEJEN 9+VIBORG++8800+DNK'ATT+2++F'DTM+329:740911'LOC+178+CPH'LOC+179+PEK'LOC+180+DNK+:::AALBORG'NAT+2+DNK'DOC+P:110:ZZZ+102622532'DTM+36:140708'LOC+91+DNK'NAD+FM+++SCHOEFTING:LENE+EGEBJERGVANG 71+BALLERUP++2750+DNK'ATT+2++F'DTM+329:640118'LOC+178+CPH'LOC+179+PEK'LOC+180+DNK+:::TAARNBY'NAT+2+DNK'DOC+P:110:ZZZ+202004356'DTM+36:160804'LOC+91+DNK'NAD+FM+++TOERNOE:LII THERESE SOPHIE+BAGARFRUVAEGEN 90+SKOENDAL++128 66+SWE'ATT+2++F'DTM+329:750408'LOC+178+CPH'LOC+179+PEK'LOC+180+SWE+:::KRISTIANSTAD'NAT+2+SWE'DOC+P:110:ZZZ+81494074'DTM+36:150914'LOC+91+SWE'NAD+FM+++DARRE:INGRIDVERONICA+ROERSKAERSVEJ 4+GENTOFTE++2820+DNK'ATT+2++F'DTM+329:600130'LOC+178+CPH'LOC+179+PEK'LOC+180+CHL+:::SANTIAGO 'NAT+2+DEU'DOC+P:110:ZZZ+C4TV1J6VO'DTM+36:190224'LOC+91+DEU'NAD+FM+++GAO:SHANG+AOZHOUKANGDU5 16DWANGJING NORTH ROAD 39 HAOCHAO YANG DISTRICT+BEIJING+++CHN'ATT+2++F'DTM+329:811108'LOC+178+CPH'LOC+179+PEK'LOC+180+CHN+:::JIANGSU'NAT+2+CHN'DOC+P:110:ZZZ+G39207877'DTM+36:200203'LOC+91+CHN'CNT+41:12'UNT+141+SK08014211'UNE+1+SK08014210'UNZ+1+SK080142'";
		try {
			new EdifactParser().parse(new ByteArrayInputStream(sampleData.getBytes(Charset.forName("latin1"))));
		} catch (Exception ex) {
			fail(ex.getMessage());
		}
	}
	
	@Test
	public void testParseLong2() {
		String sampleData = "UNA:+.? 'UNB+UNOA:4+SCANDINAVIAN AIRLINES:ZZ+CNADAPIS:ZZ+110503:0140+SK080142++APIS'UNG+PAXLST+SCANDINAVIAN AIRLINES+CNADAPIS+110503:0140+SK08014210+UN+D:05B'UNH+SK08014211+PAXLST:D:05B:UN:IATA+SK995 02 CPH09+01'BGM+250'RFF+TN:SK995 02 CPH:::9'NAD+MS+++MALMQVIST:HANS'COM+?+(46) 8 797 2974:TE+?+(46) 8 797 4050:FX'TDT+20+SK995'LOC+125+CPH'DTM+189:1105022100:201'LOC+87+PEK'DTM+232:1105031155:201'NAD+FM+++LANGSET:ERIK CHRISTIAN+SIGURD HJORTSVEI 1+ROEYSE++3530+NOR'ATT+2++M'DTM+329:510928'LOC+178+CPH'LOC+179+PEK'LOC+180+NOR+:::BAERUM'NAT+2+NOR'DOC+P:110:ZZZ+27530127'DTM+36:191117'LOC+91+NOR'DOC+L:110:ZZZ+280951 39185'DTM+36:151001'LOC+91+NOR'NAD+FM+++BUE:JOERGEN MARENTZIUS+HOFSTADEIKENE9+ASKER++1384+NOR'ATT+2++M'DTM+329:580916'LOC+178+CPH'LOC+179+PEK'LOC+180+NOR+:::RISSA'NAT+2+NOR'DOC+P:110:ZZZ+20607252'DTM+36:141028'LOC+91+NOR'DOC+L:110:ZZZ+N-160958 46916'DTM+36:160201'LOC+91+NOR'NAD+FM+++INGERS:LARS URBAN+OSKARSVAEGEN 32+SUNDBYBERG++172 76+SWE'ATT+2++M'DTM+329:630521'LOC+178+CPH'LOC+179+PEK'LOC+180+SWE+:::LULEAA DOMK'NAT+2+SWE'DOC+P:110:ZZZ+81785954'DTM+36:160108'LOC+91+SWE'DOC+L:110:ZZZ+630521 9070'DTM+36:121107'LOC+91+SWE'NAD+FM+++BENGTSSON:BENGT ERLING INGEMAR+GATEKAERRSVAEGEN 4+OXIE++238 43+SWE'ATT+2++M'DTM+329:550823'LOC+178+CPH'LOC+179+PEK'LOC+180+SWE+:::TOMMARP'NAT+2+SWE'DOC+P:110:ZZZ+81448998'DTM+36:150828'LOC+91+SWE'NAD+FM+++ROELBY:MARTIN JENS+DRAGONVAEGEN 44+STAFFANSTORP++245 91+SWE'ATT+2++M'DTM+329:740317'LOC+178+CPH'LOC+179+PEK'LOC+180+DNK+:::HELSINGOER'NAT+2+DNK'DOC+P:110:ZZZ+200856642'DTM+36:160110'LOC+91+DNK'NAD+FM+++MARDELL:SUSANNE ANNI+FAAGELBACKSGATAN 16+MALMOE++217 44+SWE'ATT+2++F'DTM+329:730813'LOC+178+CPH'LOC+179+PEK'LOC+180+SWE+:::M LUND'NAT+2+SWE'DOC+P:110:ZZZ+34651407'DTM+36:131203'LOC+91+SWE'NAD+FM+++FRISK:KJELL MAGNUS+EVEROED GAMLEGAARD+TOMELILLA++273 93+SWE'ATT+2++M'DTM+329:710201'LOC+178+CPH'LOC+179+PEK'LOC+180+SWE+:::U VAESTERAAS'NAT+2+SWE'DOC+P:110:ZZZ+62864032'DTM+36:130905'LOC+91+SWE'NAD+FM+++SKOVHUS:HELENE+ASMILDHOEJEN 9+VIBORG++8800+DNK'ATT+2++F'DTM+329:740911'LOC+178+CPH'LOC+179+PEK'LOC+180+DNK+:::AALBORG'NAT+2+DNK'DOC+P:110:ZZZ+102622532'DTM+36:140708'LOC+91+DNK'NAD+FM+++SCHOEFTING:LENE+EGEBJERGVANG 71+BALLERUP++2750+DNK'ATT+2++F'DTM+329:640118'LOC+178+CPH'LOC+179+PEK'LOC+180+DNK+:::TAARNBY'NAT+2+DNK'DOC+P:110:ZZZ+202004356'DTM+36:160804'LOC+91+DNK'NAD+FM+++TOERNOE:LII THERESE SOPHIE+BAGARFRUVAEGEN 90+SKOENDAL++128 66+SWE'ATT+2++F'DTM+329:750408'LOC+178+CPH'LOC+179+PEK'LOC+180+SWE+:::KRISTIANSTAD'NAT+2+SWE'DOC+P:110:ZZZ+81494074'DTM+36:150914'LOC+91+SWE'NAD+FM+++DARRE:INGRIDVERONICA+ROERSKAERSVEJ 4+GENTOFTE++2820+DNK'ATT+2++F'DTM+329:600130'LOC+178+CPH'LOC+179+PEK'LOC+180+CHL+:::SANTIAGO 'NAT+2+DEU'DOC+P:110:ZZZ+C4TV1J6VO'DTM+36:190224'LOC+91+DEU'NAD+FM+++GAO:SHANG+AOZHOUKANGDU5 16DWANGJING NORTH ROAD 39 HAOCHAO YANG DISTRICT+BEIJING+++CHN'ATT+2++F'DTM+329:811108'LOC+178+CPH'LOC+179+PEK'LOC+180+CHN+:::JIANGSU'NAT+2+CHN'DOC+P:110:ZZZ+G39207877'DTM+36:200203'LOC+91+CHN'CNT+41:12'UNT+141+SK08014211'UNE+1+SK08014210'UNZ+1+SK080142'";
		try {
			new EdifactParser().parse(new ByteArrayInputStream(sampleData.getBytes(Charset.forName("latin1"))));
		} catch (Exception ex) {
			fail(ex.getMessage());
		}
	}

}
